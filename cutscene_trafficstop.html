<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OitC – Traffic Stop Sequence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .info {
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .frame {
      position: relative;
      border: 2px solid #444;
      background: #000;
      max-width: 90vw;
      max-height: 80vh;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      opacity: 0; /* start transparent, fade in */
      transition: opacity 5s ease-in;
    }

    img.cutscene-image {
      max-width: 100%;
      max-height: 100%;
      display: block;
      transition: opacity 0.7s ease-in-out;
      position: absolute;
      inset: 0;
      margin: auto;
    }

    #scene1 { opacity: 1; }
    #scene2 { opacity: 0; }

    .overlay-text {
      position: absolute;
      left: 50%;
      bottom: 6%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-size: 0.85rem;
      max-width: 85%;
    }

    /* Page wipe overlay – only inside the frame */
    .page-wipe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to left,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.85) 35%,
        rgba(255,255,255,1) 50%,
        rgba(255,255,255,0.85) 65%,
        rgba(255,255,255,0) 100%
      );
      transform: translateX(110%) skewX(-5deg);
      animation: wipeAcross 2s ease-in-out forwards;
      pointer-events: none;
    }

    @keyframes wipeAcross {
      from { transform: translateX(110%) skewX(-5deg); }
      to   { transform: translateX(-110%) skewX(-5deg); }
    }
  </style>
</head>
<body>

  <div class="info">
    <div>OitC – Traffic Stop Cutscene</div>
    <div>Sequence: CS0001 → page turn → CS0002 → cut</div>
  </div>

  <div class="frame" id="frame">
    <!-- Scene 1 -->
    <img
      id="scene1"
      class="cutscene-image"
      src="./art/cutscenes/I-CS0001.jpg"
      alt="Cutscene 1 - traffic stop"
    />

    <!-- Scene 2 -->
    <img
      id="scene2"
      class="cutscene-image"
      src="./art/cutscenes/I-CS0002.jpg"
      alt="Cutscene 2 - officer at window"
    />

    <div class="overlay-text" id="caption">
      A routine traffic stop. Nothing to worry about… right?
    </div>
  </div>

  <script>
    const frame   = document.getElementById("frame");
    const scene1  = document.getElementById("scene1");
    const scene2  = document.getElementById("scene2");
    const caption = document.getElementById("caption");

    // Fade the whole frame in over 5 seconds
    window.addEventListener("load", () => {
      frame.style.opacity = "1";
    });

    // Timeline (relative to load):
    // 0–5s   : fade-in
    // 5–10s  : scene 1 solid
    // 10–12s : 2s "page turn" wipe + crossfade
    // 12–17s : scene 2 solid
    // 17s    : cut to black

    // Start page effect at t = 10s
    setTimeout(() => {
      // Add wipe overlay inside the frame
      const wipe = document.createElement("div");
      wipe.className = "page-wipe";
      frame.appendChild(wipe);

      // Crossfade shortly after wipe starts
      setTimeout(() => {
        scene1.style.opacity = "0";
        scene2.style.opacity = "1";
        caption.textContent =
          "The officer steps up to your window. Everything changes in the next 30 seconds.";
      }, 300);

      // Remove wipe after 2s
      setTimeout(() => {
        wipe.remove();
      }, 2000);

      // 5 seconds after scene 2 is fully visible → cut
      setTimeout(() => {
        frame.style.display = "none"; // body stays dark behind it
      }, 2000 + 5000);

    }, 10000); // 5s fade + 5s solid
  </script>

</body>
</html>