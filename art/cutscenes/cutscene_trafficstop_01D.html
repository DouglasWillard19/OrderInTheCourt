<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OITC – Traffic Stop · 01D</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root {
      --bg: #000000;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
      background: #000;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
      min-height: 100vh;
    }

    .app-window {
      position: relative;
      width: 100vw;
      height: 100vh;
      max-width: 100vw;
      max-height: 100vh;
      overflow: hidden;
      background: #000;
    }

    .app-window img {
      width: 100%;
      height: 100%;
      object-fit: contain;   /* same behavior as 01 */
      background: #000;
      display: block;
    }

    .panel {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.3s linear;
    }

    .panel.visible {
      opacity: 1;
    }

    /* z-ordering so CS0002 is on top when it breaks */
    #panel2 { z-index: 2; }
    #panel3 { z-index: 1; }
    #andy   { z-index: 3; }

    /* Break + fall animation for CS0002 */
    .break-fall {
      animation: breakFall 0.6s ease-in forwards;
    }

    @keyframes breakFall {
      0% {
        transform: scale(1) translateY(0) rotate(0deg);
        opacity: 1;
        filter: none;
      }
      10% {
        transform: scale(1.02) translateY(-2vh) rotate(-1deg);
      }
      20% {
        transform: scale(1.03) translateY(1vh) rotate(1.5deg);
      }
      30% {
        transform: scale(1.05) translateY(-1vh) rotate(-2deg);
      }
      40% {
        transform: scale(1.05) translateY(0) rotate(0deg);
      }
      100% {
        transform: scale(1.1) translateY(40vh) rotate(8deg);
        opacity: 0;
        filter: blur(2px);
      }
    }
  </style>
</head>
<body>
  <div class="app-window">
    <!-- 1s: CS0002 -->
    <img id="panel2" class="panel visible"
         src="./I-CS0002.jpg"
         alt="Traffic stop concept art panel I-CS0002" />

    <!-- next 5s: CS0003 -->
    <img id="panel3" class="panel"
         src="./I-CS0003.jpg"
         alt="Traffic stop concept art panel I-CS0003" />

    <!-- then: blackout Andy -->
    <img id="andy" class="panel"
         src="./blackoutandy.jpg"
         alt="Blackout Andy" />
  </div>

  <script>
    const p2   = document.getElementById('panel2');
    const p3   = document.getElementById('panel3');
    const andy = document.getElementById('andy');

    // After 1s: reveal CS0003 behind, "break + fall" CS0002
    setTimeout(() => {
      // CS0003 comes in
      p3.classList.add('visible');

      // CS0002 plays break/fall animation
      p2.classList.add('break-fall');

      // Once animation is done, clean up its visible flag
      setTimeout(() => {
        p2.classList.remove('visible');
      }, 600); // match breakFall duration
    }, 1000);

    // After 6s total (1s + 5s): CS0003 → blackout Andy
    setTimeout(() => {
      p3.classList.remove('visible');
      andy.classList.add('visible');
    }, 6000);
  </script>
</body>
</html>
